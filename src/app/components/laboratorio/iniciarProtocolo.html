<plex-layout main="9">
    <plex-layout-main>
        <header>
            <!--Panel de Agendas-->
            <h4>Laboratorio general | NUEVA SOLICITUD</h4>
        </header>

        <div class="row">
            <div *ngIf="showSeleccionarPaciente" class="col-12">
                <label *ngIf="showSeleccionarPaciente">Paciente</label>
                <pacientesSearch [bloquearCreate]="true" [modoCompleto]="false" [hideFooter]="true" (selected)="seleccionarPaciente($event)">
                </pacientesSearch>
            </div>
        </div>

        <div class="row" *ngIf=" !showSeleccionarPaciente">
            <div class="col-3">
                <plex-datetime type="date" [(ngModel)]="modelo.solicitud.fecha" name="fecha" label="Fecha" [required]="true"></plex-datetime>
            </div>
            <div class="col-3">
                <plex-datetime type="date" [(ngModel)]="modelo.solicitud.fechaSolicitud" name="fechaSolicitud" label="Fecha de solicitud"
                    [required]="true"></plex-datetime>
            </div>
            <div class="col-3">
                <plex-select [(ngModel)]="modelo.solicitud.efectorSolicitante" name="efectorSolicitante" label="Efector solicitante" (getData)="loadOrganizacion($event)">
                </plex-select>
            </div>
            <div class="col-3">
                <plex-select [(ngModel)]="modelo.solicitud.profesionalOrigen" name="profesionalOrigen" label="Profesional solicitante" (getData)="loadProfesionales($event)"
                    placeholder="Escriba el apellido del Profesional" labelField="apellido + ' ' + nombre" [required]="true">
                </plex-select>
            </div>
            <div class="col-3">
                <plex-select [(ngModel)]="modelo.solicitud.prioridad" (change)="refreshSelection($event,'prioridad')" name="Prioridad" label="Prioridad"
                    [data]="prioridadesEnum" [required]="true"></plex-select>
            </div>
            <div class="col-3">
                <plex-select [(ngModel)]="modelo.solicitud.servicios" name="Servicio" (getData)="loadServicios($event)" label="Servicio"
                    placeholder="Seleccione el servicio" labelField="term" [required]="true" idField="term">
                </plex-select>
            </div>
        </div>